{% extends 'workshop_app/base.html' %}

{% block title %}
	Booking
{% endblock %}

{% block extra %}
	
	 <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>

	<script type="text/javascript">
		function sendData(d){
			var URL = "{{ URL_ROOT }}/book_workshop/";
			console.log(d);
			$.ajax({
				url: URL,
				type: "POST",
				data: {
					d, 
					csrfmiddlewaretoken: $("input[name=csrfmiddlewaretoken]").val()
					  },
			
				success:function(response){
					alert("success: " + response);

				}
			});
		}
	</script>
{% endblock %}

{% block header %}
	<nav class="navbar navbar-inverse">
	  <div class="container-fluid">
		<div class="navbar-header">
		  <a class="navbar-brand" href="#">WebSiteName</a>
		</div>
		<ul class="nav navbar-nav">
		  <li class="active"><a href="#">Home</a></li>
		</ul>
		<ul class="nav navbar-nav navbar-right">
		  <li><a href="{{ URL_ROOT }}/view_profile"><span class="glyphicon glyphicon-user"></span> Profile </a></li>
		  <li><a href="{{ URL_ROOT }}/logout"><span class="glyphicon glyphicon-log-in"></span> Logout</a></li>
		</ul>
	  	</div>
    </nav>
{% endblock %}

{% block content %}
	<div class="container">
		<table class="table table-hover">
			<thead>
				<tr>
					
					<th>Instructor Name</th>
					<th>Course Name</th>
					<th>Course Day</th>
					<th>Booking</th>
				</tr>
			</thead>
			{% csrf_token %}
			
			{% for workshop in workshop_details %}
					<tbody>

						<tr>
							<td id="instructor-name">{{ workshop.1.0 }}</td>
							<td id="course-name">{{ workshop.1.1 }}</td>
							<td id="workshop-date{{ forloop.counter }}">{{ workshop.0 }}</td>
							<td><button class="btn btn-primary btn-sm" id="book-btn" onClick="sendData('{{workshop.0}},{{workshop.1.2}},{{workshop.1.3}}')" > Book</button></td>
						</tr>

					</tbody>
			{% endfor %}
		</table>
	</div>

	<!-- Page Navigation -->
	<div class="container">
		<div class="Page-Nav" align="center">
		<nav aria-label="Page navigation">
		 	<ul class="pagination pagination-sm">
			  	<li class="page-item">
			      {% if workshop_details.has_previous %}
					<a class="page-link" tabindex="-1" 
							href="?page={{ workshop_details.previous_page_number }}">Previous</a>
				  {% endif %}
			    </li>
			    <li class="page-item">
			    <span class="current">
				Page {{ workshop_details.number }} of {{ workshop_details.paginator.num_pages }}
					</span>
				</li>
			    <li class="page-item">
			    {% if workshop_details.has_next %}
					<a class="page-link" href="?page={{ workshop_details.next_page_number }}">Next
					</a>	
				{% endif %}
			    </li>
		  	</ul>
		</nav>
		</div>
	</div>

{% endblock %}